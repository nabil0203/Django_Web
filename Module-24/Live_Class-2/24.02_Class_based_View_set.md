# üì¶Class based View Set


### üîóDoucumentation -> [Click here](https://www.django-rest-framework.org/tutorial/6-viewsets-and-routers/)
- Django REST framework -> Tutorial -> ViewSets & Routers

- Follow from `class SnippetViewSet(viewsets.ModelViewSet):`

------------------


## üß†Why Class-based-view?
- Class handles all CRUD requests in one place
    - get, post, put/patch, delete
- No need to define request methods separately like in function-based views


----------------

## üìåSteps

### 1Ô∏è‚É£`views.py` 
- Import Required Module
- `viewsets` module contains `ModelViewSet` and other classes to **simplify CRUD operations**.
```py
from rest_framework import viewsets
```


### 2Ô∏è‚É£`views.py`
- Follow this structure:
```py
class AuthorViewSet(viewsets.ModelViewSet):

    queryset = Author.objects.all()
    serializer_class = AuthorSerializer
```
- With this, we don‚Äôt need to manually write 4 differernt functions for CRUD operations.
- `ModelViewSet` automatically provides all CRUD actions.
- `queryset` ‚Üí defines which model instances the view will operate on.
- `serializer_class` ‚Üí defines how the model data is serialized to JSON and deserialized back.

### 3Ô∏è‚É£app `urls.py`
```py

router = DefaultRouter()                                # Created a router which will capture incoming CRUD request
                                                        # then is triggers the corresponding views


# Register your ViewSet with a URL prefix
router.register('authors', views.AuthorViewSet)                 # this will create routes for the 4 Request (get, post, put/patch, delete)




urlpatterns = [

    # path('author/', views.author_list_create, name = 'author_list_create'),                # old function based author list

    path('', include(router.urls)),                                                          # new class based (Include router-generated URLs)

    path('book/', views.book_list_create, name = 'book_list_create')

]
```


# üîÄRole of Router

- `DefaultRouter()` automatically:
    - Captures incoming HTTP requests
    - Maps them to the correct ViewSet method

- `router.register('authors', views.AuthorViewSet)`
    - This is a **Author** related router
    - Author related all the request will be capture by this

----------- 

### üîóVisit `http://127.0.0.1:8000/api/`
- You will get:
```py
{
    "authors": "http://127.0.0.1:8000/api/authors/"
}
```

---------------



## ‚ñ∂Ô∏èExplanation 
- `ModelViewSet` is a class-based view provided by Django REST Framework.
- It automatically handles all CRUD operations:
    - GET -----------‚Üí list & retrieve
    - POST ---------‚Üí create
    - PUT / PATCH -‚Üí update
    - DELETE -------‚Üí delete
- You only need to define:
    - `queryset` ‚Üí which data to work with
    - `serializer_class` ‚Üí how data is converted to/from JSON


